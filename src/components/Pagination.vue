<template>
  <div class="pagination--wrap">
    <div v-if="pages > 1" class="pagination">
      
      <div class="page-item edge-button" :class="{disabled : page === 1}" @click="selectPage(1)">
        <!-- <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M8.27195 2.334C8.31435 2.29046 8.36504 2.25585 8.42103 2.23222C8.47702 2.20859 8.53718 2.19641 8.59795 2.19641C8.65872 2.19641 8.71888 2.20859 8.77487 2.23222C8.83086 2.25585 8.88155 2.29046 8.92395 2.334C9.01087 2.42325 9.05951 2.54292 9.05951 2.6675C9.05951 2.79209 9.01087 2.91175 8.92395 3.001L4.05095 7.999L8.92395 12.998C8.96782 13.0429 9.00241 13.096 9.02574 13.1543C9.04908 13.2126 9.06071 13.2749 9.05997 13.3377C9.05923 13.4004 9.04612 13.4624 9.02141 13.5202C8.9967 13.5779 8.96087 13.6301 8.91595 13.674C8.87317 13.7158 8.82256 13.7488 8.76702 13.771C8.71148 13.7932 8.65211 13.8043 8.59229 13.8035C8.53247 13.8028 8.47339 13.7903 8.41842 13.7667C8.36346 13.7431 8.31368 13.7089 8.27195 13.666L3.08995 8.348C2.99894 8.25463 2.948 8.12939 2.948 7.999C2.948 7.86861 2.99894 7.74338 3.08995 7.65L8.27195 2.334ZM12.2719 2.334C12.3143 2.29046 12.365 2.25585 12.421 2.23222C12.477 2.20859 12.5372 2.19641 12.5979 2.19641C12.6587 2.19641 12.7189 2.20859 12.7749 2.23222C12.8309 2.25585 12.8816 2.29046 12.9239 2.334C13.0109 2.42325 13.0595 2.54292 13.0595 2.6675C13.0595 2.79209 13.0109 2.91175 12.9239 3.001L8.05095 7.999L12.9239 12.998C12.9678 13.0429 13.0024 13.096 13.0257 13.1543C13.0491 13.2126 13.0607 13.2749 13.06 13.3377C13.0592 13.4004 13.0461 13.4624 13.0214 13.5202C12.9967 13.5779 12.9609 13.6301 12.9159 13.674C12.8732 13.7158 12.8226 13.7488 12.767 13.771C12.7115 13.7932 12.6521 13.8043 12.5923 13.8035C12.5325 13.8028 12.4734 13.7903 12.4184 13.7667C12.3635 13.7431 12.3137 13.7089 12.2719 13.666L7.08995 8.348C6.99894 8.25463 6.948 8.12939 6.948 7.999C6.948 7.86861 6.99894 7.74338 7.08995 7.65L12.2719 2.334Z" fill="#C4C4C4"/>
        </svg> -->
        <span class="page-link">
          Первая
        </span>
      </div>
      <!-- <div v-if="page > 1" class=" pagination__arrow pagination__prev" @click="selectPage(page - 1)">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M9.52195 2.334L4.33995 7.65C4.24894 7.74338 4.198 7.86861 4.198 7.999C4.198 8.12939 4.24894 8.25463 4.33995 8.348L9.52195 13.666C9.56435 13.7095 9.61504 13.7442 9.67103 13.7678C9.72702 13.7914 9.78718 13.8036 9.84795 13.8036C9.90872 13.8036 9.96888 13.7914 10.0249 13.7678C10.0809 13.7442 10.1316 13.7095 10.1739 13.666C10.2612 13.5767 10.31 13.4568 10.31 13.332C10.31 13.2072 10.2612 13.0873 10.1739 12.998L5.30095 7.999L10.1739 3.001C10.2609 2.91175 10.3095 2.79209 10.3095 2.6675C10.3095 2.54292 10.2609 2.42325 10.1739 2.334C10.1316 2.29046 10.0809 2.25585 10.0249 2.23222C9.96888 2.20859 9.90872 2.19641 9.84795 2.19641C9.78718 2.19641 9.72702 2.20859 9.67103 2.23222C9.61504 2.25585 9.56435 2.29046 9.52195 2.334Z" fill="#C4C4C4"/>
        </svg>
      </div> -->
      <div class="page-item" v-for="(pageNumber, idx) in arrayNumbers.slice(sliceStart, page > 1 ? sliceEnd - 1 : sliceEnd)" :key="idx" :class="{ active: page == pageNumber }" @click="selectPage(pageNumber)">
        <span class="page-link"> {{ pageNumber }} </span>
      </div>

      <!-- <div v-if="page < pages" class=" pagination__arrow pagination__next" @click="selectPage(page + 1)">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M5.32599 2.333C5.23877 2.4223 5.18994 2.54217 5.18994 2.667C5.18994 2.79183 5.23877 2.9117 5.32599 3.001L10.199 8L5.32599 12.998C5.23877 13.0873 5.18994 13.2072 5.18994 13.332C5.18994 13.4568 5.23877 13.5767 5.32599 13.666C5.36839 13.7095 5.41908 13.7442 5.47507 13.7678C5.53106 13.7914 5.59122 13.8036 5.65199 13.8036C5.71277 13.8036 5.77293 13.7914 5.82892 13.7678C5.88491 13.7442 5.9356 13.7095 5.97799 13.666L11.16 8.349C11.251 8.25563 11.3019 8.13039 11.3019 8C11.3019 7.86961 11.251 7.74438 11.16 7.651L5.97799 2.334C5.9356 2.29046 5.88491 2.25585 5.82892 2.23222C5.77293 2.20859 5.71277 2.19641 5.65199 2.19641C5.59122 2.19641 5.53106 2.20859 5.47507 2.23222C5.41908 2.25585 5.36839 2.29046 5.32599 2.334V2.333Z" fill="#C4C4C4"/>
        </svg>
      </div> -->
      <div class="page-item edge-button" @click="selectPage(pages)" :class="{disabled : page === pages}">
        <!-- <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M7.076 2.33301C7.11846 2.28954 7.1692 2.255 7.22523 2.23146C7.28126 2.20791 7.34143 2.19583 7.40221 2.19592C7.46298 2.19602 7.52312 2.20828 7.57907 2.232C7.63503 2.25572 7.68567 2.29041 7.72799 2.33401L12.91 7.65101C13.001 7.74439 13.0519 7.86962 13.0519 8.00001C13.0519 8.13041 13.001 8.25564 12.91 8.34901L7.72799 13.666C7.6856 13.7096 7.63491 13.7442 7.57892 13.7678C7.52293 13.7914 7.46277 13.8036 7.40199 13.8036C7.34122 13.8036 7.28106 13.7914 7.22507 13.7678C7.16908 13.7442 7.11839 13.7096 7.076 13.666C6.98877 13.5767 6.93994 13.4568 6.93994 13.332C6.93994 13.2072 6.98877 13.0873 7.076 12.998L11.949 8.00001L7.076 3.00001C6.98907 2.91076 6.94043 2.7911 6.94043 2.66651C6.94043 2.54193 6.98907 2.42227 7.076 2.33301ZM3.07599 2.33301C3.11846 2.28954 3.1692 2.255 3.22523 2.23146C3.28125 2.20791 3.34143 2.19583 3.40221 2.19592C3.46298 2.19602 3.52312 2.20828 3.57907 2.232C3.63503 2.25572 3.68566 2.29041 3.72799 2.33401L8.91 7.65101C9.00101 7.74439 9.05195 7.86962 9.05195 8.00001C9.05195 8.13041 9.00101 8.25564 8.91 8.34901L3.72799 13.666C3.6856 13.7096 3.63491 13.7442 3.57892 13.7678C3.52293 13.7914 3.46277 13.8036 3.40199 13.8036C3.34122 13.8036 3.28106 13.7914 3.22507 13.7678C3.16908 13.7442 3.11839 13.7096 3.07599 13.666C2.98877 13.5767 2.93994 13.4568 2.93994 13.332C2.93994 13.2072 2.98877 13.0873 3.07599 12.998L7.949 8.00001L3.07599 3.00001C2.98907 2.91076 2.94043 2.7911 2.94043 2.66651C2.94043 2.54193 2.98907 2.42227 3.07599 2.33301Z" fill="#C4C4C4"/>
        </svg> -->
        <span class="page-link">
          Последняя
        </span>
      </div>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue';

const props = defineProps({
  offset: Number,
  limit: Number,
  pages: Number,
  maxPageItems: {
    type: Number,
    default: 3
  }
})

const emit = defineEmits(['openPage'])

//--------------------------------------------------------------------------------------//
//                                       COMPUTED                                       //
//--------------------------------------------------------------------------------------//

const page = computed(() => Math.ceil(props.offset / props.limit) + 1)
const arrayNumbers = computed(() => [...Array(props.pages).keys()].map(i => i + 1))
const sliceStart = computed(() => page.value - (props.maxPageItems - 1) < 1 ? 0 : page.value - (props.maxPageItems - 1))
const sliceEnd = computed(() => props.pages - (props.pages - props.maxPageItems) + page.value - 1)

//--------------------------------------------------------------------------------------//
//                                       METHODS                                        //
//--------------------------------------------------------------------------------------//

const selectPage = page => emit('openPage', page - 1)

</script>

<style scoped lang="scss" src="@scss/pagination.scss"></style>
